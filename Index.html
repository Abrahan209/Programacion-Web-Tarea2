<html>
    <head>
        <link rel="stylesheet" href="estilo.css">

        <script type="text/javascript">
            var numpantalla = "0";
            var pantallaconnumero = "si"; // Si o NO 
            var usarpunto = "no"; // Si o NO
            var numeropera = 0;
            var operapendiente = "";
            var solucion = "";
            let historial = [];

        function ingresarnumero(x) 
        {
            if (x != ".") {

                if (numpantalla == "0" || pantallaconnumero == "si") 
                {
                    document.Calculadora.txtboxnros.value = x;
                    numpantalla = x;
                }
                else if (x != ".") 
                {
                    document.Calculadora.txtboxnros.value += x;
                    numpantalla += x;
                }
            }

            if (x == "." && usarpunto == "no" && numpantalla == "0") 
            {
                document.Calculadora.txtboxnros.value = "0.";
                numpantalla = x;
                usarpunto = "si";
            }
            else if (x == "." && usarpunto == "no") 
            {

                document.Calculadora.txtboxnros.value += x;
                numpantalla += x;
                usarpunto = "si";
            }
            else if (x == "." && usarpunto == "si") 
            {

            }
            pantallaconnumero = "no";
        }

            function ingresaoperacion(y) 
            {
                    if (operapendiente == "") {

                        numespera = document.Calculadora.txtboxnros.value;
                        document.Calculadora.txtboxnros.value += y;
                        operapendiente = y;
                        pantallaconnumero = "no";
                        numpantalla = "";
                        usarpunto = "no";
                    
                        _
                    }

                }

                function resultado() {

                    if (operapendiente != "") {
                        solucion = numespera + operapendiente + numpantalla;
                        document.Calculadora.txtboxnros.value = eval(solucion);
                        numpantalla = eval(solucion);
                        pantallaconnumero = "si";
                        operapendiente = "";
                        usarpunto = "no";
                        historial.push(' ${numeropera} ${operapendiente} ${numpantalla}  =  ${eval(solucion)}')

                    }

                }

                function raiz() 
                {
                    if (operapendiente == "") {
                        document.Calculadora.txtboxnros.value = Math.sqrt(numpantalla);
                        pantallaconnumero = "no";
                        operapendiente = "";
                        usarpunto = "no";
                    }
                }

                function limpiar() 
                {
                    numpantalla = "0";
                    pantallaconnumero = "si";
                    usarpunto = "no";
                    numespera = 0;
                    operapendiente = "";
                    solucion = "";
                    document.Calculadora.txtboxnros.value = "0";
                }

                const Guardar = () => {
                    localStorage.setItem('historial', JSON.stringify(historial))
                }

        </script>
    </head>
    <body>
        <center>
            <form name="Calculadora" id="tabla">
                <table>
                    <tr>
                        <td colspan="4">
                            <input type="text" name="txtboxnros" value="0" disabled id="texto">
                        </td>
                    </tr>
                    <tr>
                        <td><input type="button" value="7" onclick="ingresarnumero(this.value)" id="boton"></td>
                        <td><input type="button" value="8" onclick="ingresarnumero(this.value)"id="boton"></td>
                        <td><input type="button" value="9" onclick="ingresarnumero(this.value)"id="boton"></td>
                        <td><input type="button" value="/" onclick="ingresaoperacion(this.value)"id="boton"></td>
                    </tr>
                    
                    <tr>
                        <td><input type="button" value="4" onclick="ingresarnumero(this.value)"id="boton"></td>
                        <td><input type="button" value="5" onclick="ingresarnumero(this.value)"id="boton"></td>
                        <td><input type="button" value="6" onclick="ingresarnumero(this.value)"id="boton"></td>
                        <td><input type="button" value="*" onclick="ingresaoperacion(this.value)"id="boton"></td>
                    </tr>
                    
                    <tr>
                        <td><input type="button" value="1" onclick="ingresarnumero(this.value)"id="boton"></td>
                        <td><input type="button" value="2" onclick="ingresarnumero(this.value)"id="boton"></td>
                        <td><input type="button" value="3" onclick="ingresarnumero(this.value)"id="boton"></td>
                        <td><input type="button" value="-" onclick="ingresaoperacion(this.value)" id="boton"></td>

                    </tr>
                    
                    <tr>
                        <td><input type="button" value="." onclick="ingresarnumero(this.value)"id="boton"></td>
                        <td><input type="button" value="0" onclick="ingresarnumero(this.value)"id="boton"></td>
                        <td><input type="button" value="C" onclick="limpiar()"id="boton"></td>
                        <td><input type="button" value="+" onclick="ingresaoperacion(this.value)" id="boton"></td>
                        

                    </tr>
                    <tr>
                        <td colspan="4"><input type="button" value="=" onclick="resultado()" id="botonigual"></td>
                    </tr>

                </table>
            </form>
        </center>
    </body>
</html>